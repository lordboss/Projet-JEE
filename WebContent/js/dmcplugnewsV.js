/*  Création DMC
*  http://www.aliasdmc.fr
*  Script libre de droit
*  ne peut être vendu ou utilisé a des fins commerciales
*  Découvrez tous les plugin javascript sur http://www.aliasdmc.fr
*  Version 1
*--------------------------------------------------------------------------*/
if (!window.dmcNewsV){var dmcNewsV = new Object();}dmcNewsV.dmcNewsVPlugNom="news_verticale";dmcNewsV.dmcNewsVisInit=false;dmcNewsV.dmcNewsVTimer=50;dmcNewsV.dmcNewsVSpacer=5;dmcNewsV.dmcNewsVplug=function(){ return this;};dmcNewsV.dmcNewsVVitesse="2";dmcNewsV.dmcNewsVDoitBouger=true;dmcNewsV.dmcNewsVTimeOut=null;dmcNewsV.dmcNewsVTimeInterval=null;dmcNewsV.dmcNewsVStop=false;dmcNewsV.dmcNewsVWidth =null;dmcNewsV.dmcNewsVHeight =null;dmcNewsV.dmcNewsVbtShowAll =null;dmcNewsV.dmcNewsVNewsBase = null;dmcNewsV.dmcNewsVallNewsProperties = new Array();dmcNewsV.dmcNewsVisShowAll =false;dmcNewsV.dmcNewsVaddNews = function (obj){if(obj.id!=undefined && obj.id !=""){this.dmcNewsVallNewsProperties.push(obj);}else{alert("Vous devez préciser une propriété id");}};dmcNewsV.dmcNewsVinitNews = function(evt,param){for(var i=0; i<param.dmcNewsVallNewsProperties.length; i++){var lanews = getDmcId(param.dmcNewsVallNewsProperties[i].id);if(lanews!=null){dmcUtils.duplicateProperty(lanews,dmcNewsV);lanews.dmcNewsVInit(param.dmcNewsVallNewsProperties[i]);}else{alert("Elément id introuvable");}}};dmcNewsV.dmcNewsVInit = function (objElement){this.dmcNewsVsetDefautParam(objElement);this.dmcNewsVgetTaille();this.dmcNewsVSetEvent();this.dmcNewsVSetStyle();this.dmcNewsVCloneFils();this.dmcNewsVStart();};dmcNewsV.dmcNewsVStart = function (){if(this.dmcNewsVHeightMax>this.dmcNewsVHeight){var t= this;clearTimeout(t.dmcNewsVTimeOut);t.dmcNewsVTimeOut=setTimeout(function(){t.dmcNewsVdefiler()},t.dmcNewsVTimer);}};dmcNewsV.dmcNewsVsetDefautParam = function (obj){if(this.dmcNewsVisInit==false){for(var i in obj){var propriete = i;switch(propriete){case  "timer" : this.dmcNewsVTimer = obj[i];break;case  "bouge" : this.dmcNewsVDoitBouger = obj[i];break;case  "height" : this.dmcNewsVHeight = Number(obj[i]);break;case  "width" : this.dmcNewsVWidth = Number(obj[i]);break;case  "btshow" : this.dmcNewsVbtShowAll = getDmcId(obj[i]);break;case  "spacer" : this.dmcNewsVSpacer = (Number(getDmcId(obj[i]))>0)? getDmcId(obj[i]) : this.dmcNewsVSpacer;break;}}}};dmcNewsV.dmcNewsVshowAll = function (aevent,param){var t= false;if(param.dmcNewsVisShowAll ==false){param.dmcNewsVisShowAll = true;t= true;while(param.hasChildNodes()==true){ var Enfant=param.childNodes[0]; param.removeChild(Enfant); }param.appendChild(param.dmcNewsVNewsBase);}else{param.dmcNewsVisShowAll = true;t= false;}param.dmcNewsVTimeInterval= setInterval(function(){param.dmcNewsVDeplier(t)},5);};dmcNewsV.dmcNewsVDeplier = function (valeur){if(valeur==true){var taille =(parseInt(dmcMethode.getStyle(this,"height"))+2);var taillew = (this.dmcNewsVHeightBase>this.dmcNewsVHeight)? this.dmcNewsVHeightBase : this.dmcNewsVHeight;if(taille >= taillew) {clearInterval(this.dmcNewsVTimeInterval);dmcMethode.setStyle(this,"height",taillew+"px");}else{dmcMethode.setStyle(this,"height",taille+"px");}}else {var taille = (parseInt(dmcMethode.getStyle(this,"height"))-2);if(taille <= this.dmcNewsVHeight){clearInterval(this.dmcNewsVTimeInterval);dmcMethode.setStyle(this,"height",this.dmcNewsVHeight+"px");this.dmcNewsVHeightMax=this.dmcNewsVNewsBase;this.dmcNewsVisShowAll = false;this.dmcNewsVInit();}else{dmcMethode.setStyle(this,"height",taille+"px");}}};dmcNewsV.dmcNewsVgetTaille= function (){if(this.dmcNewsVisInit==false){if(this.dmcNewsVWidth==null){this.dmcNewsVWidth = parseInt(this.getStyle(null,"width"));}else{dmcMethode.setStyle(this,"width",this.dmcNewsVWidth+"px");}if(this.dmcNewsVHeight==null){this.dmcNewsVHeight = parseInt(this.getStyle(null,"height"));}else{dmcMethode.setStyle(this,"height",this.dmcNewsVHeight+"px");}}};dmcNewsV.dmcNewsVisFils = function (objfils){return (objfils.nodeType==1 && objfils.nodeName.toLowerCase()=="li")? true:false;};dmcNewsV.dmcNewsVCloneFils= function (){if(this.dmcNewsVDoitBouger==true){var q = Math.round((this.dmcNewsVHeight/(this.dmcNewsVHeightMin*this.dmcNewsVAllNews.length))+0.5)-1;var r= new Array();for(var h=0;h<q;h++){var t= new Array();for(var i=0;i<this.dmcNewsVAllNews.length;i++){var f = this.dmcNewsVAllNews[i].cloneNode(true);this.dmcNewsVSetLiStyle(f,null);dmcMethode.setStyle(f,"top",Number(this.dmcNewsVHeightMax+this.dmcNewsVSpacer)+"px");dmcMethode.setStyle(f,"visibility","visible");this.appendChild(f);this.dmcNewsVHeightMax +=Number(parseInt(f.offsetHeight)+this.dmcNewsVSpacer);t.push(f);r= r.concat(t);}}this.dmcNewsVAllNews = this.dmcNewsVAllNews.concat(r);}};dmcNewsV.dmcNewsVSetEvent = function (){var t= this;if(t.dmcNewsVisInit==false){t.ajouteEvent(null,"mouseover",function(evt) {t.dmcNewsVEvent(evt,t)}, false);t.ajouteEvent(null,"mouseout", function(evt) {t.dmcNewsVEvent(evt,t)} , false);if(t.dmcNewsVbtShowAll != null){t.ajouteEvent(t.dmcNewsVbtShowAll,"click", function(evt) {t.dmcNewsVshowAll(evt,t)} , false);}}};dmcNewsV.dmcNewsVEvent = function (aevent,param){if(param){param.dmcNewsVStop = (aevent.type.toLowerCase()=="mouseout")? false : true;if(!param.dmcNewsVStop){param.dmcNewsVStart();}}};dmcNewsV.dmcNewsVSetDefautStyle = function (f){dmcMethode.setStyle(f,"display","block");};dmcNewsV.dmcNewsVSetLiStyle = function (f,o){this.dmcNewsVSetDefautStyle(f);dmcMethode.setStyle(f,"margin","0");dmcMethode.setStyle(f,"visibility","hidden");dmcMethode.setStyle(f,"position","absolute");var paddingL = parseInt(dmcMethode.getStyle(f,"padding-left"));var paddingR = parseInt(dmcMethode.getStyle(f,"padding-right"));if(o!=null){paddingL = parseInt(dmcMethode.getStyle(o,"padding-left"));paddingR = parseInt(dmcMethode.getStyle(o,"padding-right"));}dmcMethode.setStyle(f,"width",Number(this.dmcNewsVWidth-(paddingL+paddingR))+"px");};dmcNewsV.dmcNewsVSetStyle = function (){dmcMethode.setStyle(this,"position","relative");this.dmcNewsVSetDefautStyle(this);dmcMethode.setStyle(this,"overflow","hidden");dmcMethode.setStyle(this,"padding","0");this.dmcNewsVAllNews =new Array();this.dmcNewsVHeightMax = 0;this.dmcNewsVHeightMin = 999999999;this.dmcNewsVNewsBase =document.createDocumentFragment();for(var i=0;i<this.childNodes.length;i++){var f = this.childNodes[i];if(this.dmcNewsVisFils(f)==true){if(this.dmcNewsVbtShowAll != null){var c = f.cloneNode(true);this.dmcNewsVSetLiStyle(c,f);dmcMethode.setStyle(c,"top",Number(this.dmcNewsVHeightMax+this.dmcNewsVSpacer)+"px");dmcMethode.setStyle(c,"visibility","visible");this.dmcNewsVNewsBase.appendChild(c);}this.dmcNewsVSetLiStyle(f,null);dmcMethode.setStyle(f,"top",Number(this.dmcNewsVHeightMax+this.dmcNewsVSpacer)+"px");dmcMethode.setStyle(f,"visibility","visible");this.dmcNewsVAllNews.push(f);this.dmcNewsVSetHeightMin(parseInt(f.offsetHeight));this.dmcNewsVHeightMax +=Number(parseInt(f.offsetHeight)+this.dmcNewsVSpacer);}}this.dmcNewsVHeightBase = this.dmcNewsVHeightMax;this.dmcNewsVisInit=true;};dmcNewsV.dmcNewsVSetHeightMin= function (valeur){this.dmcNewsVHeightMin = (valeur<this.dmcNewsVHeightMin)? valeur :this.dmcNewsVHeightMin;};dmcNewsV.dmcNewsVdefiler= function (){var f =null, count = 0,cf =null, old =null;if(this.dmcNewsVStop==false && this.dmcNewsVisShowAll==false){for(var i=0; i<this.childNodes.length; i++){f = this.childNodes[i];if(this.dmcNewsVisFils(f)==true){var oldPosY = parseInt(dmcMethode.getStyle(f,"top"));var newPosY = Number(oldPosY)-Number(this.dmcNewsVVitesse);dmcMethode.setStyle(f,"top",newPosY+"px");	count ++;if(newPosY+parseInt(f.offsetHeight)<-2){cf = f.cloneNode(true);old = f;this.dmcNewsVSetLiStyle(cf,null);var last = this.dmcNewsVAllNews[this.dmcNewsVAllNews.length-1];var posY  = parseInt(dmcMethode.getStyle(last,"top"))+parseInt(f.offsetHeight)-Number(this.dmcNewsVVitesse); dmcMethode.setStyle(cf,"top",posY+"px");dmcMethode.setStyle(cf,"visibility","visible");this.dmcNewsVAllNews[this.dmcNewsVAllNews.length-1]=cf;}}if(count==this.dmcNewsVAllNews.length){break;}}if(cf!=null){var posY  = parseInt(dmcMethode.getStyle(f,"top"))+parseInt(f.offsetHeight)+this.dmcNewsVSpacer; dmcMethode.setStyle(cf,"top",posY+"px");this.removeChild(old);this.appendChild(cf);}var t = this;t.dmcNewsVTimeOut = setTimeout(function(){t.dmcNewsVdefiler()},t.dmcNewsVTimer);}};dmcMethode.ajouteEvent(window,"load",function(evt){dmcNewsV.dmcNewsVinitNews(evt,dmcNewsV)} , false);